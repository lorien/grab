<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Proxy Server Support &#8212; Grab 1.2.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css?v=2bf1fcf8" />
    
    <script src="../_static/documentation_options.js?v=6efca38a"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Searching the response body" href="response_search.html" />
    <link rel="prev" title="Cookie Support" href="cookies.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="response_search.html" title="Searching the response body"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="cookies.html" title="Cookie Support"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Grab 1.2.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Proxy Server Support</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="proxy-server-support">
<span id="grab-proxy"></span><h1>Proxy Server Support<a class="headerlink" href="#proxy-server-support" title="Link to this heading">¶</a></h1>
<section id="basic-usage">
<h2>Basic Usage<a class="headerlink" href="#basic-usage" title="Link to this heading">¶</a></h2>
<p>To make Grab send requests through a proxy server, use the <a class="reference internal" href="settings.html#option-proxy"><span class="std std-ref">proxy</span></a> option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">g</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">proxy</span><span class="o">=</span><span class="s1">&#39;example.com:8080&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If the proxy server requires authentication, use the <a class="reference internal" href="settings.html#option-proxy-userpwd"><span class="std std-ref">proxy_userpwd</span></a> option
to specify the username and password:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">g</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">proxy</span><span class="o">=</span><span class="s1">&#39;example.com:8080&#39;</span><span class="p">,</span> <span class="n">proxy_userpwd</span><span class="o">=</span><span class="s1">&#39;root:777&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also specify the type of proxy server: “http”, “socks4” or “socks5”. By default,
Grab assumes that proxy is of type “http”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">g</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">proxy</span><span class="o">=</span><span class="s1">&#39;example.com:8080&#39;</span><span class="p">,</span> <span class="n">proxy_userpwd</span><span class="o">=</span><span class="s1">&#39;root:777&#39;</span><span class="p">,</span> <span class="n">proxy_type</span><span class="o">=</span><span class="s1">&#39;socks5&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can always see which proxy is used at the moment in <cite>g.config[‘proxy’]</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Grab</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">proxy</span><span class="o">=</span><span class="s1">&#39;example.com:8080&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;proxy&#39;</span><span class="p">]</span>
<span class="go">&#39;example.com:8080&#39;</span>
</pre></div>
</div>
</section>
<section id="proxy-list-support">
<h2>Proxy List Support<a class="headerlink" href="#proxy-list-support" title="Link to this heading">¶</a></h2>
<p>Grab supports working with a list of multiple proxies. Use the <cite>g.proxylist</cite>
attribute to get access to the proxy manager. By default, the proxy manager is created and initialized with an empty proxy list:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Grab</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">proxylist</span>
<span class="go">&lt;grab.proxy.ProxyList object at 0x2e15b10&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">proxylist</span><span class="o">.</span><span class="n">proxy_list</span>
<span class="go">[]</span>
</pre></div>
</div>
</section>
<section id="proxy-list-source">
<h2>Proxy List Source<a class="headerlink" href="#proxy-list-source" title="Link to this heading">¶</a></h2>
<p>You need to setup the proxy list manager with details of the source that
manager will load proxies from. Using the <cite>g.proxylist.set_source</cite> method, the first
positional argument defines the type of source. Currently, two types are supported:
“file” and “remote”.</p>
<p>Example of loading proxies from local file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Grab</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">proxylist</span><span class="o">.</span><span class="n">set_source</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;/web/proxy.txt&#39;</span><span class="p">)</span>
<span class="go">&lt;grab.proxy.ProxyList object at 0x2e15b10&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">proxylist</span><span class="o">.</span><span class="n">proxy_list</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">proxylist</span><span class="o">.</span><span class="n">set_source</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;/web/proxy.txt&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">proxylist</span><span class="o">.</span><span class="n">get_next</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">proxylist</span><span class="o">.</span><span class="n">get_next_proxy</span><span class="p">()</span>
<span class="go">&lt;grab.proxy.Proxy object at 0x2d7c610&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">proxylist</span><span class="o">.</span><span class="n">get_next_proxy</span><span class="p">()</span><span class="o">.</span><span class="n">server</span>
<span class="go">&#39;example.com&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">proxylist</span><span class="o">.</span><span class="n">get_next_proxy</span><span class="p">()</span><span class="o">.</span><span class="n">address</span>
<span class="go">&#39;example.com:8080&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">proxylist</span><span class="o">.</span><span class="n">proxy_list</span><span class="p">)</span>
<span class="go">1000</span>
</pre></div>
</div>
<p>And here is how to load proxies from the web:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Grab</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">proxylist</span><span class="o">.</span><span class="n">set_source</span><span class="p">(</span><span class="s1">&#39;remote&#39;</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="s1">&#39;http://example.com/proxy.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="automatic-proxy-rotation">
<h2>Automatic Proxy Rotation<a class="headerlink" href="#automatic-proxy-rotation" title="Link to this heading">¶</a></h2>
<p>By default, if you set up any non-empty proxy source, Grab starts rotating through proxies from the proxy list for each request.
You can disable proxy rotation with <a class="reference internal" href="settings.html#option-proxy-auto-change"><span class="std std-ref">proxy_auto_change</span></a> option set to False:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">grab</span><span class="w"> </span><span class="kn">import</span> <span class="n">Grab</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Grab</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">proxylist</span><span class="o">.</span><span class="n">set_source</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;/web/proxy.txt&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="s1">&#39;http://yandex.ru/&#39;</span><span class="p">)</span>
<span class="go">DEBUG:grab.network:[02] GET http://yandex.ru/ via 91.210.101.31:8080 proxy of type http with authorization</span>
<span class="go">&lt;grab.response.Response object at 0x109d9f0&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="s1">&#39;http://rambler.ru/&#39;</span><span class="p">)</span>
<span class="go">DEBUG:grab.network:[03] GET http://rambler.ru/ via 194.29.185.38:8080 proxy of type http with authorization</span>
<span class="go">&lt;grab.response.Response object at 0x109d9f0&gt;</span>
</pre></div>
</div>
<p>Now let’s see how Grab works when <cite>proxy_auto_change</cite> is False:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">grab</span><span class="w"> </span><span class="kn">import</span> <span class="n">Grab</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Grab</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">proxylist</span><span class="o">.</span><span class="n">set_source</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s1">&#39;/web/proxy.txt&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">proxy_auto_change</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="s1">&#39;http://ya.ru&#39;</span><span class="p">)</span>
<span class="go">DEBUG:grab.network:[04] GET http://ya.ru</span>
<span class="go">&lt;grab.response.Response object at 0x109de50&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">change_proxy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="s1">&#39;http://ya.ru&#39;</span><span class="p">)</span>
<span class="go">DEBUG:grab.network:[05] GET http://ya.ru via 62.122.73.30:8080 proxy of type http with authorization</span>
<span class="go">&lt;grab.response.Response object at 0x109d9f0&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="s1">&#39;http://ya.ru&#39;</span><span class="p">)</span>
<span class="go">DEBUG:grab.network:[06] GET http://ya.ru via 62.122.73.30:8080 proxy of type http with authorization</span>
<span class="go">&lt;grab.response.Response object at 0x109d9f0&gt;</span>
</pre></div>
</div>
</section>
<section id="getting-proxy-from-proxy-list">
<h2>Getting Proxy From Proxy List<a class="headerlink" href="#getting-proxy-from-proxy-list" title="Link to this heading">¶</a></h2>
<p>Each time you call <cite>g.proxylist.get_next_proxy</cite>, you get the next proxy from the proxy list.
When you receive the last proxy in the list, you’ll continue receiving proxies from the beginning of the list.
You can also use <cite>g.proxylist.get_random_proxy</cite> to pick a random proxy from the proxy list.</p>
</section>
<section id="automatic-proxy-list-reloading">
<h2>Automatic Proxy List Reloading<a class="headerlink" href="#automatic-proxy-list-reloading" title="Link to this heading">¶</a></h2>
<p>Grab automatically rereads the proxy source each <cite>g.proxylist.reload_time</cite>
seconds. You can set the value of this option as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Grab</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">proxylist</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">reload_time</span><span class="o">=</span><span class="mi">3600</span><span class="p">)</span> <span class="c1"># reload proxy list one time per hour</span>
</pre></div>
</div>
</section>
<section id="proxy-accumulating">
<h2>Proxy Accumulating<a class="headerlink" href="#proxy-accumulating" title="Link to this heading">¶</a></h2>
<p>Be default, Grab overwrites the proxy list each time it reloads the proxy source. You can change that behaviour:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">.</span><span class="n">proxylist</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">accumulate_updates</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>That will setup Grab to append new proxies to existing ones.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Proxy Server Support</a><ul>
<li><a class="reference internal" href="#basic-usage">Basic Usage</a></li>
<li><a class="reference internal" href="#proxy-list-support">Proxy List Support</a></li>
<li><a class="reference internal" href="#proxy-list-source">Proxy List Source</a></li>
<li><a class="reference internal" href="#automatic-proxy-rotation">Automatic Proxy Rotation</a></li>
<li><a class="reference internal" href="#getting-proxy-from-proxy-list">Getting Proxy From Proxy List</a></li>
<li><a class="reference internal" href="#automatic-proxy-list-reloading">Automatic Proxy List Reloading</a></li>
<li><a class="reference internal" href="#proxy-accumulating">Proxy Accumulating</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="cookies.html"
                          title="previous chapter">Cookie Support</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="response_search.html"
                          title="next chapter">Searching the response body</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/grab/proxy.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="response_search.html" title="Searching the response body"
             >next</a> |</li>
        <li class="right" >
          <a href="cookies.html" title="Cookie Support"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Grab 1.2.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Proxy Server Support</a></li> 
      </ul>
    </div>
    
    <div class="footer" role="contentinfo">
    &#169; Copyright 2013-2025, Gregory Petukhov.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    </div>
    <p style="margin-top: 0; text-align: center; font-size: 0.8em;">Developed by <a href="http://github.com/lorien">me</a></p>
    <p style="margin-top: 0; text-align: center; font-size: 0.8em;">Jut a friend of mine who does web-scrpaing too: <a href="https://www.imscraping.ninja">www.imscraping.ninja</a>.</p>

  </body>
</html>